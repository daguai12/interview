å¥½å˜ ğŸ‘
C++14 ç›¸æ¯” C++11 å¹¶ä¸æ˜¯ä¸€ä¸ªâ€œå¤§ç‰ˆæœ¬â€ï¼Œå®ƒæ›´åƒæ˜¯ **C++11 çš„ä¸€ä¸ªå°ä¿®è®¢**ï¼Œè§£å†³äº†ä¸€äº›â€œè¯­æ³•å‘â€å’Œâ€œä½¿ç”¨ç—›ç‚¹â€ï¼ŒåŒæ—¶åŠ äº†ä¸€äº›å®ç”¨çš„å°ç‰¹æ€§ã€‚

é¢è¯•ã€å†™ä»£ç æ—¶ï¼Œä»¥ä¸‹è¿™äº› **C++14 æ–°ç‰¹æ€§** æ˜¯æœ€å€¼å¾—æŒæ¡çš„ï¼š

---

# ğŸŒŸ C++14 å¿…å­¦æ–°ç‰¹æ€§æ¸…å•

## 1. **æ³›å‹ Lambda**

### ğŸ“Œ ç‰¹æ€§

* åœ¨ C++11 ä¸­ï¼Œlambda å‚æ•°å¿…é¡»å†™å…·ä½“ç±»å‹ã€‚
* C++14 æ”¯æŒ **lambda å‚æ•°ç”¨ `auto`**ï¼Œä»è€Œå®ç°â€œæ³›å‹ lambdaâ€ã€‚

```cpp
auto f = [](auto x, auto y) {
    return x + y;
};

std::cout << f(1, 2) << std::endl;     // int ç›¸åŠ 
std::cout << f(1.5, 2.5) << std::endl; // double ç›¸åŠ 
```

âœ… ä½œç”¨ï¼šå¤§å¹…æå‡ lambda çš„æ³›ç”¨æ€§ã€‚
ğŸ‘‰ é¢è¯•é«˜é¢‘è€ƒç‚¹ã€‚

---

## 2. **è¿”å›ç±»å‹æ¨å¯¼ï¼ˆå‡½æ•° return type deductionï¼‰**

### ğŸ“Œ ç‰¹æ€§

* C++11 ä¸­ `auto` åªèƒ½ç”¨äºå˜é‡ï¼Œå‡½æ•°å¿…é¡»å†™è¿”å›ç±»å‹ï¼Œæˆ–è€…å†™ `-> decltype(expr)`ã€‚
* C++14 å…è®¸å‡½æ•°ç›´æ¥ç”¨ `auto` æ¨å¯¼è¿”å›ç±»å‹ã€‚

```cpp
auto add(int a, int b) {
    return a + b;  // è¿”å›ç±»å‹è‡ªåŠ¨æ¨å¯¼ä¸º int
}
```

âœ… ä½œç”¨ï¼šè®©å‡½æ•°å£°æ˜æ›´ç®€æ´ã€‚
ğŸ‘‰ é¢è¯•æ—¶ç»å¸¸å’Œ C++11 å¯¹æ¯”è€ƒã€‚

---

## 3. **`decltype(auto)`**

### ğŸ“Œ ç‰¹æ€§

* å•ç‹¬çš„ `auto` ä¼šâ€œä¸¢æ‰å¼•ç”¨æ€§â€ã€‚
* C++14 å¼•å…¥ `decltype(auto)`ï¼Œä¿ç•™è¡¨è¾¾å¼çš„ç²¾ç¡®ç±»å‹ï¼ˆåŒ…æ‹¬å¼•ç”¨ï¼‰ã€‚

```cpp
int x = 42;
int& ref = x;

auto a = (ref);        // a æ˜¯ intï¼Œå¼•ç”¨æ€§ä¸¢å¤±
decltype(auto) b = (ref); // b æ˜¯ int&ï¼Œå¼•ç”¨æ€§ä¿ç•™
```

âœ… ä½œç”¨ï¼šæ›´å‡†ç¡®çš„ç±»å‹æ¨å¯¼ã€‚
ğŸ‘‰ æ¨¡æ¿ & æ³›å‹ç¼–ç¨‹å¸¸è€ƒã€‚

---

## 4. **å˜é‡æ¨¡æ¿ (Variable Templates)**

### ğŸ“Œ ç‰¹æ€§

* å¯ä»¥ä¸º **å¸¸é‡ / å€¼** å®šä¹‰æ¨¡æ¿ã€‚

```cpp
template<typename T>
constexpr T pi = T(3.141592653589793);

std::cout << pi<double> << std::endl;
std::cout << pi<float> << std::endl;
```

âœ… ä½œç”¨ï¼šè®©â€œå¸¸é‡æ³›å‹åŒ–â€ï¼Œå–ä»£å¤§é‡çš„å®ã€‚
ğŸ‘‰ æ¨¡æ¿å…ƒç¼–ç¨‹å¸¸è§ã€‚

---

## 5. **åˆ«åæ¨¡æ¿æ”¯æŒé»˜è®¤æ¨¡æ¿å‚æ•°**

### ğŸ“Œ ç‰¹æ€§

* åœ¨ C++11 ä¸­ï¼Œ`using` åˆ«åæ¨¡æ¿ä¸èƒ½æŒ‡å®šé»˜è®¤æ¨¡æ¿å‚æ•°ã€‚
* C++14 ä¿®å¤äº†è¿™ä¸ªé™åˆ¶ã€‚

```cpp
template<class T = int>
using Vec = std::vector<T>;

Vec<> v;   // ç­‰ä»·äº std::vector<int>
```

âœ… ä½œç”¨ï¼šè®©åˆ«åæ¨¡æ¿æ›´å¥½ç”¨ã€‚

---

## 6. **äºŒè¿›åˆ¶å­—é¢é‡ + æ•°å­—åˆ†éš”ç¬¦**

### ğŸ“Œ ç‰¹æ€§

* ç›´æ¥å†™äºŒè¿›åˆ¶å­—é¢é‡ï¼š`0b...`
* ç”¨ `'` åˆ†éš”æ•°å­—ï¼Œæå‡å¯è¯»æ€§ã€‚

```cpp
int n = 0b1010'1100;  // äºŒè¿›åˆ¶
int big = 1'000'000;  // æ•°å­—åˆ†éš”ç¬¦
```

âœ… ä½œç”¨ï¼šå†™ç¡¬ä»¶å¯„å­˜å™¨å€¼ã€é•¿æ•°å­—æ—¶æ›´ç›´è§‚ã€‚
ğŸ‘‰ é¢è¯•å¯èƒ½è€ƒå°ç»†èŠ‚ã€‚

---

## 7. **`std::make_unique`**

### ğŸ“Œ ç‰¹æ€§

* C++11 æœ‰ `std::make_shared`ï¼Œå´æ²¡æœ‰ `std::make_unique`ã€‚
* C++14 è¡¥ä¸Šäº†è¿™ä¸ªç¼ºå¤±ã€‚

```cpp
auto p = std::make_unique<int>(42);
```

âœ… ä½œç”¨ï¼šå®‰å…¨åˆ›å»º `unique_ptr`ï¼Œé¿å…è£¸ `new`ã€‚
ğŸ‘‰ å®é™…å¼€å‘é‡Œç”¨å¾—éå¸¸å¤šã€‚

---

## 8. **æ³›åŒ–çš„ constexpr**

### ğŸ“Œ ç‰¹æ€§

* C++11 çš„ `constexpr` å‡½æ•°é™åˆ¶å¾ˆä¸¥æ ¼ï¼šåªèƒ½ä¸€æ¡ `return`ã€‚
* C++14 å…è®¸ `constexpr` å‡½æ•°é‡Œæœ‰ï¼š

  * å±€éƒ¨å˜é‡
  * åˆ†æ”¯ (`if`)
  * å¾ªç¯ (`for`, `while`)

```cpp
constexpr int factorial(int n) {
    int res = 1;
    for(int i = 1; i <= n; ++i) res *= i;
    return res;
}

static_assert(factorial(5) == 120, "error");
```

âœ… ä½œç”¨ï¼šçœŸæ­£å®ç”¨çš„ç¼–è¯‘æœŸè®¡ç®—ã€‚
ğŸ‘‰ æ¨¡æ¿å…ƒç¼–ç¨‹/ç¼–è¯‘æœŸä¼˜åŒ–å¸¸è€ƒã€‚

---

## 9. **`[[deprecated]]` å±æ€§**

### ğŸ“Œ ç‰¹æ€§

* C++14 æ–°å¢å±æ€§æ ‡è®° `[[deprecated]]`ï¼Œæç¤ºæŸä¸ªå‡½æ•°/ç±»å·²è¿‡æ—¶ã€‚

```cpp
[[deprecated("use new_func instead")]]
void old_func();

void new_func();

old_func(); // ç¼–è¯‘æ—¶ä¼šè­¦å‘Š
```

âœ… ä½œç”¨ï¼šAPI æ¼”è¿›æ—¶éå¸¸æœ‰ç”¨ã€‚
ğŸ‘‰ é¢è¯•å¯èƒ½è€ƒå±æ€§è¯­æ³•ã€‚

---

# ğŸ“Œ æ€»ç»“ï¼ˆC++14 æœ€å€¼å¾—å­¦çš„ï¼‰

1. **æ³›å‹ lambda**ï¼ˆauto å‚æ•°ï¼‰
2. **å‡½æ•°è¿”å›ç±»å‹æ¨å¯¼ (`auto`)**
3. **decltype(auto)**
4. **å˜é‡æ¨¡æ¿**
5. **åˆ«åæ¨¡æ¿çš„é»˜è®¤å‚æ•°**
6. **äºŒè¿›åˆ¶å­—é¢é‡ã€æ•°å­—åˆ†éš”ç¬¦**
7. **std::make_unique**
8. **æ›´å¼ºå¤§çš„ constexpr**
9. **[[deprecated]] å±æ€§**

---

âœ… C++14 çš„å®šä½å°±æ˜¯ï¼š**è®© C++11 æ›´å¥½ç”¨ã€æ›´å®‰å…¨ã€æ›´ç®€æ´**ã€‚
ğŸ‘‰ é¢è¯•æ—¶ï¼šæ³›å‹ lambdaã€`decltype(auto)`ã€`make_unique`ã€constexpr çš„å¢å¼ºï¼Œè¿™å››ä¸ªæœ€å¸¸è€ƒã€‚

---

è¦ä¸è¦æˆ‘å¸®ä½ åšä¸€å¼  **å¯¹æ¯”è¡¨ï¼šC++11 vs C++14 çš„å…³é”®ç‰¹æ€§å·®å¼‚**ï¼Œè¿™æ ·æ›´ç›´è§‚åœ°çœ‹åˆ° C++14 è¡¥äº†å“ªäº›å‘ï¼Ÿ
