## 3.4.1 设置断点 —— 摘要总结

1. **在源代码行设置断点**

   * 语法：`break 文件名:行号`（可简写为 `b`）
   * 示例：`b chapter_3.3.cpp:49`
   * 程序运行到该行时暂停，可用 `list` 查看代码、`print` 查看变量。

2. **为函数设置断点**

   * 语法：`break 函数名`
   * 示例：`b add_member`
   * 如果函数重载（同名不同参），则所有版本都会断。
   * 可使用类限定符：`b 类名::函数名` 或指定参数版本：`b 函数名(参数类型)`。

3. **使用正则表达式设置函数断点**

   * 语法：`rbreak 正则表达式` 或 `rb 正则表达式`
   * 示例：`rb test_fun*`（所有以 test\_fun 开头的函数都会断）。

4. **通过偏移量设置断点**

   * 基于当前执行行设置偏移。
   * 语法：

     * `b +N` → 当前行之后第 N 行
     * `b -N` → 当前行之前第 N 行

5. **设置条件断点**

   * 语法：`b 断点 if 条件`
   * 示例：

     * `b chapter_3.3.cpp:79 if i==900`
     * `b cond_fun_test if a==10`
     * `b cond_fun_test if str=="test"`
   * 只有满足条件时才会命中。

6. **在指令地址上设置断点**

   * 用于无符号调试时。
   * 语法：`b *地址`
   * 先用 `p 函数名` 获取函数地址，再设置断点。

7. **设置临时断点**

   * 命中一次后自动删除。
   * 语法：`tbreak 断点` 或 `tb 断点`
   * 示例：`tb test_fun_x`（函数调用多次，仅第一次命中）。

---

## 3.4.2 启用/禁用断点

* **禁用断点**：`disable 编号`，断点不会命中，但仍存在。
* **启用断点**：`enable 编号`，恢复被禁用的断点。
* **范围操作**：`disable 4-10` / `enable 4-10`。
* **标志**：禁用后 `Enb = n`，启用后 `Enb = y`。

---

## 3.4.3 启用断点一次

* 命令：`enable once 编号`。
* 断点命中一次后自动**禁用**，但不会删除。
* 类似临时断点，但区别是：临时断点命中后**删除**，而它是**禁用**。

---

## 3.4.4 启用断点并删除

* 命令：`enable delete 编号`。
* 命中一次后断点**自动删除**。
* 相当于把禁用断点转为临时断点。

---

## 3.4.5 启用断点并命中N次

* 命令：`enable count N 编号`。
* 断点命中 **N 次**后自动禁用。
* 例如：`enable count 5 1` → 命中 5 次后禁用。

---

## 3.4.6 忽略断点前N次命中

* 命令：`ignore 编号 次数`。
* 前 N 次命中被忽略，从第 N+1 次起才真正生效。
* 例如：`ignore 1 7` → 忽略前 7 次命中，从第 8 次开始触发。

---

## 3.4.7 查看断点

* 查看所有断点：

  * `info breakpoints`
  * `info break`
  * `info b`
  * `i b`
* 查看指定断点：`info b 编号`。
* 组合方式：`info`/`i` + `breakpoint`/`break`/`b`。

---

## 3.4.8 删除断点

1. **删除所有断点**：`delete`（会提示确认）。
2. **删除指定编号**：`delete 5` 或 `delete 5 6`。
3. **删除范围**：`delete 5-7` 或 `delete 5-7 10-12`。
4. **删除指定函数**：`clear 函数名`。
5. **删除指定行号**：`clear 文件名:行号` 或 `clear 行号`。

⚠ 区别：

* **delete** → 全局删除，包含观察点、捕获点。
* **clear** → 受当前栈帧影响，只能删断点，不能删观察点/捕获点。

---

## 3.5.1 启动程序

* 命令：`run` 或 `r`。
* 程序在 gdb 中第一次运行，直到遇到第一个断点暂停。
* 一般流程：

  1. `gdb 程序名` 进入调试。
  2. 设置参数/断点。
  3. `run` 启动执行。

---

## 3.5.2 继续运行

* 命令：`continue` 或 `c`。
* 程序在断点处暂停后，继续运行，直到遇到下一个断点或结束。

---

## 3.5.3 继续运行并跳过当前断点N次

* 命令：`continue N`。
* 忽略当前及接下来的 **N-1 次命中**，在第 N 次命中时才暂停。
* 例：`continue 8` → 忽略前 8 次命中，从第 9 次起才暂停。

---

## 3.5.4 继续运行直到当前函数执行完成

* 命令：`finish`。
* 在函数内断点暂停后，执行完整个函数，直到回到**调用该函数的位置**再中断。
* 用于跳过函数中不关心的部分。

---

## 3.5.5 单步执行

* 命令：`step` 或 `s`。
* 逐语句执行：

  * 如果当前行有函数调用，则进入函数内部。
  * 如果没有函数调用，则执行到下一行。
* 可带参数：`s N` → 连续执行 N 行（进入函数）。

---

## 3.5.6 逐过程执行

* 命令：`next` 或 `n`。
* 与 `step` 类似，但不会进入函数调用，直接执行到下一行。
* 可带参数：`n N` → 连续执行 N 行（不进入函数）。
* 与断点结合：执行过程中遇到断点仍会中断。

---


## 3.6 查看当前函数参数

在 GDB 调试中，当程序停在某个函数内部时，可以使用命令

* `info args`
* 或简写 `i args`

来查看该函数的所有参数值。无论是 `main` 函数还是其他函数，都能显示当前函数的参数及其内容。


