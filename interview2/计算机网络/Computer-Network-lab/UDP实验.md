我们我们无需深入探讨nslookup或DNS的更多细节，因为我们仅需在Wireshark中捕获几个UDP报文段，且本实验设计为短时长任务！  


### 操作步骤  
在Wireshark中开始捕获数据包后，对一个你许久未访问过的主机名运行nslookup命令。随后停止捕获，设置Wireshark数据包过滤器，使其仅显示主机发送和接收的UDP报文段。选择第一个UDP报文段，在详情窗口中展开UDP字段。若无法在捕获记录中找到UDP报文段，或无法在实时网络连接中运行Wireshark，可下载包含UDP报文段的数据包跟踪文件。  


### 问题回答  
若你将本实验作为课程的一部分，教师会说明作业提交方式（无论是书面形式还是通过学习管理系统）。  

1. 选择捕获记录中的第一个UDP报文段：  
   - 该报文段在跟踪文件中的**数据包编号**是多少？  
   - 此UDP报文段携带的**应用层有效载荷或协议消息类型**是什么？  
   - 在Wireshark中查看该数据包的详情：UDP报头包含多少个字段？（请勿查阅教材！直接根据数据包跟踪中的观察结果回答。）这些字段的名称是什么？无需深入探讨nslookup或DNS的更多细节，因为我们仅需在Wireshark中捕获几个UDP报文段，且本实验设计为短时长任务！  


### 操作步骤  
在Wireshark中开始捕获数据包后，对一个你许久未访问过的主机名运行nslookup命令。随后停止捕获，设置Wireshark数据包过滤器，使其仅显示主机发送和接收的UDP报文段。选择第一个UDP报文段，在详情窗口中展开UDP字段。若无法在捕获记录中找到UDP报文段，或无法在实时网络连接中运行Wireshark，可下载包含UDP报文段的数据包跟踪文件。  


### 问题回答  
若你将本实验作为课程的一部分，教师会说明作业提交方式（无论是书面形式还是通过学习管理系统）。  

1. 选择捕获记录中的第一个UDP报文段：  
   - 该报文段在跟踪文件中的**数据包编号**是多少？  
	   数据包编号为14
   - 此UDP报文段携带的**应用层有效载荷或协议消息类型**是什么？  
		DNS查询消息
   - 在Wireshark中查看该数据包的详情：UDP报头包含多少个字段？（请勿查阅教材！直接根据数据包跟踪中的观察结果回答。）这些字段的名称是什么？
	   包含有四个字段。
	   分别是：1.source PORT 2. destination PORT 3.Length 4.Check SUM 5.Payload
2. 通过查阅Wireshark数据包内容字段中显示的信息（或参考教材），每个UDP报头字段的长度（以字节为单位）是多少？  

	源端口（Source Port）：2 字节，用于标识发送端的应用程序端口 。
	目的端口（Destination Port）：2 字节，用于标识接收端的应用程序端口 。
	长度（Length）：2 字节，记录的是整个 UDP 报文（报头 + 有效载荷）的字节长度 。
	校验和（Checksum）：2 字节，用于对 UDP 报文进行简单的差错校验 。
	
3. Length字段中的值表示什么的长度？（可参考教材回答此问题。）请用捕获的UDP数据包验证你的结论。  
	Length字段的值表示的是头部和数据载荷的总大小。
4. UDP有效载荷中最多可以包含多少字节？（提示：此问题的答案可由上述第2题的答案推导得出。）  
	要完成问题4（“What is the maximum number of bytes that can be included in a UDP payload? (Hint: the answer to this question can be determined by your answer to 2. above)”，即 UDP 有效载荷中最多可以包含多少字节，提示可通过问题 2 的答案推导 ），可按以下步骤操作：

	### 步骤1：明确 UDP 报头长度相关知识（回顾问题 2 结论）
	从问题 2 可知，UDP 报头包含 4 个字段，每个字段占 2 字节，所以 UDP 报头固定长度是 **8 字节**（`4 个字段 × 2 字节/字段 = 8 字节` ） 。
	
	### 步骤2：了解 UDP 报文长度字段的限制
	UDP 报头里有一个 “Length”（长度）字段，该字段是 2 字节。2 字节能表示的最大无符号整数值是 `2^16 - 1 = 65535`（因为 2 字节共 16 个比特位，范围是 0 到 65535 ）。而这个 “Length” 字段表示的是 **整个 UDP 报文（报头 + 有效载荷）的总长度** 。
	
	### 步骤3：计算最大有效载荷长度
	因为整个 UDP 报文长度（由 Length 字段限制）最大是 65535 字节，其中报头占 8 字节，所以有效载荷（payload）的最大长度 = 整个 UDP 报文最大长度 - 报头长度，即：  
	`65535 - 8 = 65527 字节`  
	
	也就是说，通过问题 2 得出 UDP 报头固定 8 字节，结合 Length 字段 2 字节的限制（最大表示 65535 字节的报文总长 ），相减就能算出 UDP 有效载荷最多可包含 **65527 字节** ，这样就完成了问题 4 的解答 。
5. 源端口号的最大可能值是多少？（提示：参考第4题的提示。）  
	2的16次 - 1。
6. UDP的协议号是多少？请以十进制形式回答。要回答此问题，你需要查看包含该UDP报文段的IP数据报的Protocol字段（参见教材图4.13及关于IP报头字段的讨论）。  
	UDP的协议号是17.
7. 检查这样一对UDP数据包：你的主机发送第一个UDP数据包，第二个UDP数据包是对第一个的回复。（提示：若第二个数据包是对第一个的响应，则第一个数据包的发送方应是第二个数据包的接收方。）  
   - 这两个UDP报文段中第一个的数据包编号是多少？该UDP报文段的源端口字段值是多少？目的端口字段值是多少？  
   > 第一个数据包的编号为93,源端口字段值是49666，目的端口的字段值是53.
   
   - 第二个UDP报文段的数据包编号是多少？该报文段的源端口字段值是多少？目的端口字段值是多少？  
> 	第二个数据包的编号为94，该报文段的源端口字段值是53，目的端口字段值是49666.

   - 描述这两个数据包中端口号的关系。  


就是这样！作为一种精简、无冗余的协议，UDP理应搭配一个精简、无冗余的Wireshark实验 。