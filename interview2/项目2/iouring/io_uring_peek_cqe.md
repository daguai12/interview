`io_uring_peek_cqe` 是 `io_uring` 框架中用于检查完成队列（Completion Queue, CQ）中是否有已完成的 I/O 操作结果的函数，属于非阻塞式检查。

### 函数作用
该函数用于“偷看”完成队列中是否有可用的完成队列项（Completion Queue Entry, CQE），即检查是否有异步 I/O 操作已经完成。与阻塞式的 `io_uring_wait_cqe` 不同，它不会阻塞等待，而是立即返回结果。

### 代码解析
```c
io_uring_peek_cqe(&m_uring, &cqe);
```

- **参数**：
  - `&m_uring`：指向已初始化的 `struct io_uring` 实例的指针，即要检查的 io_uring 对象。
  - `&cqe`：用于接收 CQE 指针的输出参数。如果 CQ 中有可用项，会将指向 `struct io_uring_cqe` 结构体的指针存入该变量。

- **返回值**：
  - 成功且 CQ 中有可用项时，返回 `0`，此时 `cqe` 指向有效的完成队列项。
  - 若 CQ 为空（没有已完成的操作），返回 `-EAGAIN`。
  - 其他负数错误码表示检查失败（如参数无效等）。

### `struct io_uring_cqe` 核心字段
获取到 CQE 后，可通过以下关键信息判断操作结果：
- `res`：操作结果。0 表示成功，负数表示错误码（如 `-EIO` 表示 I/O 错误）。
- `user_data`：应用程序在提交 SQE 时设置的自定义数据，用于关联请求和对应的完成事件（例如区分不同的 I/O 任务）。

### 使用场景
适用于非阻塞场景，例如：
1. 定期检查是否有完成的 I/O 操作，避免阻塞等待。
2. 结合事件通知机制（如 `eventfd`）使用，当收到通知后再调用此函数获取结果。

### 注意事项
- 若返回 `0`（成功获取 CQE），处理完结果后需调用 `io_uring_cqe_seen` 标记该 CQE 为已处理，否则会导致 CQ 被耗尽。
- 该函数不会等待新的 CQE 产生，若需阻塞等待，应使用 `io_uring_wait_cqe`。

`io_uring_peek_cqe` 提供了一种非阻塞的方式来查询异步 I/O 操作的完成状态，适合需要灵活控制程序流程的场景。