ğŸ‘Œ ä½ é—®çš„ **`nodiscard`**ï¼Œå®ƒå’Œ `alignas` ä¸€æ ·ï¼Œä¹Ÿæ˜¯ **æ ‡å‡† C++ é‡Œçš„ attribute**ï¼Œä¸æ˜¯ GCC ä¸“å±æ‰©å±•ã€‚

---

## ğŸ”¹ `[[nodiscard]]` çš„ä½œç”¨

`[[nodiscard]]` ç”¨æ¥å‘Šè¯‰ç¼–è¯‘å™¨ï¼š**å‡½æ•°çš„è¿”å›å€¼ä¸åº”è¯¥è¢«å¿½ç•¥**ã€‚
å¦‚æœè°ƒç”¨è€…ä¸¢å¼ƒäº†è¿”å›å€¼ï¼Œç¼–è¯‘å™¨ä¼šç»™å‡ºè­¦å‘Šã€‚

è¿™æ˜¯ C++17 å¼•å…¥çš„æ ‡å‡† attributeï¼ˆåœ¨ GCCã€Clangã€MSVC éƒ½æ”¯æŒï¼‰ï¼ŒC++20 å¢å¼ºäº†å®ƒï¼Œå¯ä»¥å¸¦ä¸Šä¸€ä¸ªæç¤ºä¿¡æ¯ã€‚

---

## ğŸ”¹ åŸºæœ¬ç”¨æ³•

```cpp
[[nodiscard]] int compute() {
    return 42;
}

int main() {
    compute();  // âš ï¸ ç¼–è¯‘å™¨è­¦å‘Šï¼šè¿”å›å€¼è¢«å¿½ç•¥
}
```

---

## ğŸ”¹ å¸¦åŸå› æç¤º (C++20)

```cpp
[[nodiscard("use the result to check success or failure")]]
bool doSomething() {
    return false;
}

int main() {
    doSomething();  
    // âš ï¸ è­¦å‘Šï¼šè¿”å›å€¼è¢«å¿½ç•¥ (use the result to check success or failure)
}
```

---

## ğŸ”¹ é€‚ç”¨èŒƒå›´

1. **å‡½æ•°è¿”å›å€¼**

   * é€šå¸¸ç”¨äºè¿”å›é”™è¯¯ç ã€èµ„æºå¥æŸ„ã€è®¡ç®—ç»“æœçš„å‡½æ•°ã€‚
2. **ç±» / æšä¸¾ç±»å‹**

   * ç»™ç±»å‹åŠ  `[[nodiscard]]`ï¼Œè¡¨ç¤ºè¯¥ç±»å‹çš„å¯¹è±¡ä¸èƒ½è¢«éšæ„ä¸¢å¼ƒã€‚

   ```cpp
   struct [[nodiscard]] ErrorCode {
       int value;
   };

   ErrorCode foo() { return {1}; }

   int main() {
       foo();  // âš ï¸ è­¦å‘Šï¼šErrorCode è¢«å¿½ç•¥
   }
   ```

---

## ğŸ”¹ GCC å¯¹åº”æ‰©å±•

åœ¨ GCC æ—©æœŸï¼ˆC++17 ä¹‹å‰ï¼‰ï¼Œå¯ä»¥ç”¨ï¼š

```cpp
__attribute__((warn_unused_result))
```

ä½œç”¨ç›¸åŒï¼Œç”šè‡³æ›´æ—©å°±èƒ½ç”¨ã€‚

```cpp
__attribute__((warn_unused_result))
int legacyCompute();

int main() {
    legacyCompute();  // âš ï¸ è­¦å‘Šï¼šè¿”å›å€¼è¢«å¿½ç•¥
}
```

---

## ğŸ”¹ æ€»ç»“

* **ç°ä»£ C++ (C++17+)** â†’ ç”¨ `[[nodiscard]]`ï¼ˆæ¨èï¼‰ã€‚
* **æ—§ GCC / C ä»£ç ** â†’ ç”¨ `__attribute__((warn_unused_result))`ã€‚
* å…¸å‹åº”ç”¨åœºæ™¯ï¼š

  * è¿”å›é”™è¯¯ç çš„å‡½æ•° (`bool` / `int`)
  * è¿”å›èµ„æºå¥æŸ„çš„å‡½æ•° (æ¯”å¦‚ `FILE*`, socket fd)
  * è®¡ç®—ç»“æœå‡½æ•° (æ¯”å¦‚æ•°å­¦è¿ç®—åº“)

---

è¦ä¸è¦æˆ‘å¸®ä½ æ•´ç†ä¸€ä¸ª **å¯¹æ¯”è¡¨**ï¼ŒæŠŠ `[[nodiscard]]` å’Œ GCC çš„ `warn_unused_result`ï¼Œè¿˜æœ‰ MSVC çš„å¯¹åº”å†™æ³•ç»Ÿä¸€å°è£…æˆä¸€ä¸ªå®ï¼Ÿè¿™æ ·ä½ åœ¨è·¨å¹³å°é¡¹ç›®é‡Œå°±èƒ½å†™æˆä¸€ä¸ª `ATTR_NODISCARD` æ¥ç”¨ã€‚
