#### 简述进程间通信方法

每个进程各自有不同的用户地址空间,任何一个进程的全局变量在另一个进程中都看不到，**所以进程之间要交换数据必须通过内核**,在内核中开辟一块缓冲区,进程A把数据从用户空间拷到内核缓冲区,进程B再从内核缓冲区把数据读走,内核提供的这种机制称为进程间通信。

不同进程间的通信本质：进程之间可以看到一份公共资源；而提供这份资源的形式或者提供者不同，造成了通信方式不同。

进程间通信主要包括管道、系统IPC（包括消息队列、信号量、信号、共享内存等）、以及套接字socket。



### 管道

1. 无名管道(普通管道)(PIPE)，是 UNIX 系统IPC最古老的形式。


    1. 它是半双工的（即数据只能在一个方向上流动），具有固定的读端和写端
    
    2. 它只能用于具有亲缘关系的进程之间的通信（也是父子进程或者兄弟进程之间）
    
    3. 它可以看成是一种特殊的文件，对于它的读写也可以使用普通的read、write等函数。但是它不是普通的文件，并不属于其他任何文件系统，并且只存在于内存中


* 优点：简单方便
* 缺点：
  1. 局限于单向通信 
  2. 只能创建在它的进程以及其**有亲缘关系**的进程之间
  3. 缓冲区有限

2. FIFO，也称为命名管道，它是一种文件类型。

   1. FIFO可以在无关的进程之间交换数据,与无名管道不同。

   2. FIFO有路径名与之相关联，它以一种特殊设备文件形式存在于文件系统中。

* 优点：可以实现任意关系的进程间的通信
* 缺点：
  1. 长期存于系统中，使用不当容易出错
  2. 缓冲区有限

### 系统IPC：

3. **消息队列**，是消息的链接表，存放在内核中。一个消息队列由一个标识符（即队列ID）来标识。 (消息队列克服了信号传递信息少，管道只能承载无格式字节流以及缓冲区大小受限等特点)具有写权限得进程可以按照一定得规则向消息队列中添加新信息；对消息队列有读权限得进程则可以从消息队列中读取信息；

特点：

    1. 消息队列是面向记录的，其中的消息具有特定的格式以及特定的优先级。
    
    2. 消息队列独立于发送与接收进程。进程终止时，消息队列及其内容并不会被删除。
    
    3. 消息队列可以实现消息的随机查询,消息不一定要以先进先出的次序读取,也可以按消息的类型读取。


* 优点：可以实现任意进程间的通信，并通过系统调用函数来实现消息发送和接收之间的同步，无需考虑同步问题，方便
* 缺点：信息的复制需要额外消耗 CPU 的时间，不适宜于信息量大或操作频繁的场合

4. **信号量（semaphore）**与已经介绍过的 IPC 结构不同，它是一个计数器，可以用来控制多个线程对共享资源的访问。**信号量用于实现进程间的互斥与同步，而不是用于存储进程间通信数据**。

特点：

    1. 信号量用于进程间同步，若要在进程间传递数据需要结合共享内存。
    
    2. 信号量基于操作系统的 PV 操作，程序对信号量的操作都是原子操作。
    
    3. 每次对信号量的 PV 操作不仅限于对信号量值加 1 或减 1，而且可以加减任意正整数。
    
    4. 支持信号量组。


* 优点：可以同步进程
* 缺点：信号量有限

5. 信号（Signal）：一种比较复杂的通信方式，用于通知接收进程某个事件已经发生

6. 套接字（Socket）：
   socket也是一种进程间通信机制，与其他通信机制不同的是，它可用于不同主机之间的进程通信。

* 优点：
  1. 传输数据为字节级，传输数据可自定义，数据量小效率高
  2. 传输数据时间短，性能高
  3. 适合于客户端和服务器端之间信息实时交互
  4. 可以加密,数据安全性强
* 缺点：需对传输的数据进行解析，转化成应用级的数据。

7. 共享内存（Shared Memory）

它使得多个进程可以访问同一块内存空间（这段共享内存由一个进程创建），不同进程可以及时看到对方进程中对共享内存中数据得更新。这种方式需要**依靠某种同步操作，如互斥锁和信号量等**
特点：

    1. 共享内存是最快的一种IPC，因为进程是直接对内存进行存取
    
    2. 因为多个进程可以同时操作，所以需要进行同步
    
    3. 信号量+共享内存通常结合在一起使用，信号量用来同步对共享内存的访问


* 优点：无须复制，快捷，信息量大
* 缺点：
  1. 通信是通过**将共享空间缓冲区直接附加到进程的虚拟地址空间**中来实现的，因此进程间的读写操作的同步问题
  2. 利用内存缓冲区直接交换信息，内存的实体存在于计算机中，只能同一个计算机系统中的诸多进程共享，不方便网络通信
