那你说说成就系统应该用什么设计模式？（观察者模式）



[红黑树](https://www.nowcoder.com/jump/super-jump/word?word=红黑树)一个节点的左子树深度为n的话，右子树的的深度最小为多少





问： shared_ptr 和 weak_ptr， weak_ptr什么时候能知道它存的shared_ptr失效了

这个问题我前面一直在说shared_ptr 的 use_count为0的时候，后面反应过来说weak_ptr lock的时候会发现过期了



ICMP协议的作用



smtp协议的作用



A*算法



sudo的作用，实现原理，内部机制



HTTP 状态码 301 302区别



消息队列如何保证可靠机制。



MySQL慢查询。



如何实现单点登录，跨站点攻击有了解吗。



nginx的负载均衡。七层负载均衡，四层负载均衡



Redis 用del指令和unlink指令删除一个key的区别？



Redis分布式锁怎么实现？说说解锁的步骤？



介绍下你知道的HTTP的Header，知道多少说多少



MySQL的整体架构。接着问InnoDB下创建一个表会生成几个文件。





Mysql怎么优化sql语句？ 

  答：这里就简单说一下吧，首先分析一下慢查询日志，通过日志去找出IO大的SQL以及发现未命中索引的SQL语句......然后对于需要优化的sql语句：  

-  应尽量避免在 where 子句中使用!=、<、>操作符或对字段进行null值判断，否则将引擎放弃使用索引而进行全表扫描； 
-  只返回必要的列：最好不要使用 SELECT * 语句； 
-  只返回必要的行：使用 LIMIT 语句来限制返回的数据； 

```
    mysql> SELECT * FROM table LIMIT 5;
```

-  将一个大连接查询分解成对每一个表进行一次单表查询，然后在应用程序中进行关联，这样做的好处有：    
  -  让缓存更高效。对于连接查询，如果其中一个表发生变化，那么整个查询缓存就无法使用。而分解后的多个查询，即使其中一个表发生变化，对其它表的查询缓存依然可以使用； 
  -  分解成多个单表查询，这些单表查询的缓存结果更可能被其它查询使用到，从而减少冗余的查询； 
  -  减少锁竞争 



  然后面试官接着问怎么查询一条sql语句是否使用索引？（大概是这个意思） 

  答：使用explain命令，通过explain命令可以得到表的读取顺序、数据读取操作的操作类型、哪些索引可以使用、哪些索引被实际使用、表之间的引用以及被扫描的行数等问题。



你的数据库里如果有一张很大数据量的表，该如何优化查询效率？

答：当时主要说了分库分表的办法。然后被细问，主要问了分表后增删查改怎么操作？



TCP的可靠性是怎么保证的？

数据包校验 

 对失序数据包重新[排序]()（TCP报文具有序列号） 

 丢弃重复数据 

 应答机制：接收方收到数据之后，会发送一个确认（通常延迟几分之一秒）； 

 超时重发：发送方发出数据之后，启动一个定时器，超时未收到接收方的确认，则重新发送这个数据； 

 流量控制：确保接收端能够接收发送方的数据而不会缓冲区溢出



Linux中rm（删除）正在被进程占用的文件会发生什么？

在 Linux 系统中，通过 rm 命令删除一个文件，实际上是在相应的目录结构中 unlink 这个文件。如果这个文件仍然被打开着，这个文件仍然可以被这个进程所使用，并将继续占用磁盘空间。等这个程序关闭该文件后，对应文件的空间才会被释放。 

  然后他问我知道原理是怎么样的吗？ 

  答：（这里楼主基本上就是靠猜的了，瑟瑟发抖。）我就说了下innode节点balabala......，然后面试官说我基本思路是对的（震惊！我都不知道自己说了啥！）



TCP和UDP的区别，讲到TCP报文段有检验和，问了一下这个检验和是否包含头部，忘了，答不包含，其实包含。。。



多核CPU每个核都有自己的缓存吗？蒙的有，对了。那他们要访问同一个地址的时候怎么处理？这里没听懂，还给我举了个例子讲了一下，没听过，说了个写回法，看该变量是否被修改过，没修改过直接拿，修改过写回内存再拿。

10.缓存可见性听过没？没听过





[c++](https://www.nowcoder.com/jump/super-jump/word?word=c%2B%2B)内存分布，主要就是5大区，每个区有什么用



堆栈的特点，为什么不只用栈而有堆这个东西



右值是什么？forward和move的区别（这里区别没答上来TAT，后面搜了一下发现是我知道的东西我忘了…）



说说const转换



[c++](https://www.nowcoder.com/jump/super-jump/word?word=c%2B%2B)短路法则



vector push_back()代码实现



TOP K快排复杂度，回答O(NlogN)然后告诉我该怎么算，其实O(N)，等比数列求和

两个[排序](https://www.nowcoder.com/jump/super-jump/word?word=排序)数组找第k大的数（没答好）



1. 内存碎片化以及解决方案



1. 快排复杂度证明



1. `#define`的底层实现



1. [c++](https://www.nowcoder.com/jump/super-jump/word?word=c%2B%2B)的编译过程，python与[c++](https://www.nowcoder.com/jump/super-jump/word?word=c%2B%2B)的区别，为什么python效率低



1. 调试的时候打断点的原理





粘包问题怎么解决的，具体实现。

自己写协议怎么设计，我答TLV格式的协议。





出了一个题问我，如果我写了一个函数，返回对象是一个指针，但是别人调用的时候忘记delete这个指针了，我要怎么做让别人不delete这个指针，还不会内存泄漏。我思考了一会说我可能go语言defer可以实现，然后说了思路。  


  5、然后让我在C++ 里面实现go语言的defer。（很难受，我答不出来，他循序渐进的给了好多提示很辜负面试官呀，最后我说我指定不行了，他说lamda表达式可以实现我才有点头绪，但是还是不行。）



CPU局部性原理+CPU流水预测



auto实现，Lambda为啥出现，原理是什么，为什么是用匿名类实现



为啥要2MSL



GO调度器



- linux文件系统讲一下（超级块，inode，data）

- SIGPIPE如何产生的



- 四次挥手，close-wait大量是什么情况



- 超时重传，快速重传的机制，什么时候出现



- 粘包问题如何处理
- HTTP层面如何处理粘包问题
- 101状态码知道吗（HTTP 101 Switching [Proto](https://www.nowcoder.com/jump/super-jump/word?word=Proto)col（协议切换）状态码表示服务器应[客户端](https://www.nowcoder.com/jump/super-jump/word?word=客户端)升级协议的请求对协议进行切换。）



- 如何优雅的写if-else、switch-case （表驱动法
- linux命令（查看这个文件被哪一个进程占用的命令？？？？）

- 进程由什么东西组成



- 智能指针 unique_ptr原理



- weak_ptr如何感知对象已经析构（lock，weak_ptr还提供了expired()函数来判断所指对象是否已经被销毁）



- 共享内存在多进程下如何并发读，独占写



- 用户态与内核态如何转换，什么时候会陷入内核态



1.session和cookie的区别



A* 寻路[算法](https://www.nowcoder.com/jump/super-jump/word?word=算法)

AABB盒

二维空间的碰撞检测

八叉树空间划分





socket编程里面，对于用户来说，发一个包，他能接收到的数组的大小，是TCP大还是UDP大？



可靠udp