问得很好，这是一个非常核心的操作系统概念。这里的“交换分区”或“交换空间”(swap space)，指的就是**硬盘 (HDD) 或固态硬盘 (SSD) 上的一块专用区域**。

您可以把它理解为物理内存（RAM）的“虚拟”扩展部分。

-----

### 它的作用是什么？ (What is its purpose?)

当您的物理内存（RAM）快要用完时，操作系统需要腾出空间来运行新的程序或加载新的数据。这时，内核会：

1.  在物理内存中找到一些当前不活跃或最少使用的数据页（memory pages）。
2.  将这些数据页的内容\*\*“交换出去” (swap out)\*\*，即从高速的内存中复制到低速的硬盘上的这块专用区域（交换空间）里。
3.  这样，物理内存就被释放出来，可以用于更紧急的任务。
4.  当程序再次需要那些被换出去的数据时，内核再将它们从硬盘的交换空间\*\*“交换回来” (swap in)\*\* 到物理内存中。

这个过程对应用程序是透明的，但因为硬盘读写速度远慢于内存，所以频繁的交换（swapping）会导致系统性能急剧下降。

### 它在磁盘上是什么形式？ (What form does it take on the disk?)

在 Linux 系统上，交换空间通常以两种形式存在：

1.  **交换分区 (Swap Partition)**:

      * 这是最传统、性能也最好的方式。
      * 在安装操作系统时，您会从硬盘上划分出一个**独立的、专门的分区**（例如 `/dev/sda3`），并将其格式化为 `linux-swap` 类型。
      * 内核可以直接读写这个分区，无需经过文件系统层，效率最高。

2.  **交换文件 (Swap File)**:

      * 这是一种更灵活的方式。
      * 您可以在一个已经存在的文件系统（例如根目录 `/`）下，创建一个大的空文件（例如 `/swapfile`）。
      * 然后，告诉内核将这个文件用作交换空间。
      * 它的优点是创建、调整大小或删除都比分区方便，但因为读写需要经过文件系统，性能可能略低于交换分区。

-----

### 回到您的问题

> **问题**: 如果内核在创建映射时就为整个区域预留了等量的交换空间 (swap space)，那么大部分交换空间都会被浪费。

这句话的意思是：
假设您的程序用 `mmap` 请求了 **10 GB** 的内存，但实际上只使用了其中的 **100 MB**。

如果内核采用“非过度利用”的策略，它必须保证在最坏的情况下（即这 10 GB 内存全部被使用且需要被换出），有地方存放这些数据。唯一有保障的地方就是磁盘上的交换空间。

因此，内核会立即在您的**交换分区**或**交换文件**中**预留 10 GB 的空间**，以备不时之需。但由于您的程序只用了 100 MB，那剩下的 **9.9 GB** 被预留的交换空间就完全**浪费**了，其他任何程序都无法使用它。

这就是“懒交换预留”（即内存过度利用）策略要解决的问题。

### 如何查看您系统上的交换空间？

您可以在终端运行以下命令来查看您系统上配置的交换空间：

```bash
swapon -s
```

或者

```bash
free -h
```

输出会显示交换空间的总大小、已用大小和可用大小。