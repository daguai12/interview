### **45.8 IPC 限制**

由于 System V IPC 对象会消耗内核资源（如内存），因此内核对各种 IPC 对象施加了各式各样的资源限制，以防止单个或多个应用程序耗尽系统资源。

#### **实现差异**

  * **非标准化**: SUSv3 **没有**对如何限制 System V IPC 对象的方法进行规定。
  * **实现各异**: 尽管不同 UNIX 实现之间对各种 IPC 对象所能施加的限制类型通常是类似的（例如，对象的最大数量、最大尺寸等），但**查看和修改这些限制的方法则是特定于具体实现的**。

#### **Linux 上的限制管理**

下面介绍的方法是 Linux 特有的：

  * **查看限制**:
      * **命令行**: `ipcs -l` 命令可以用来列出各种 IPC 机制的系统级限制。
      * **编程接口**: 程序可以使用 Linux 特有的 `IPC_INFO` `ctl` 操作来获取同样的信息。
  * **修改限制**:
      * 通常通过修改 `/proc/sys/kernel` 目录下的特定文件来调整这些限制值。

**`ipcs -l` 命令输出示例:**

```bash
$ ipcs -l

------ Message Queues Limits --------
max queues system wide = 32000
max size of message (bytes) = 8192
default max size of queue (bytes) = 16384

------ Shared Memory Limits --------
max number of segments = 4096
max seg size (kbytes) = 18014398509465599
max total shared memory (kbytes) = 18014398509481980
min seg size (bytes) = 1

------ Semaphore Limits --------
max number of arrays = 32000
max semaphores per array = 32000
max semaphores system wide = 1024000000
max ops per semop call = 500
semaphore max value = 32767
```

关于消息队列、信号量和共享内存的**具体限制**，将在后续的相关章节中进行更详细的讨论。