### **37.1 概述**

**Daemon（守护进程）** 是一种具备下列核心特征的进程：

1.  **生命周期长**: 通常，一个 daemon 会在系统启动的时候被创建，并一直运行直至系统被关闭。
2.  **后台运行且无控制终端**: 它在后台运行并且**不拥有控制终端**。这一点至关重要，因为它确保了内核永远不会为 daemon 自动生成任何与终端相关的信号（如 `SIGINT`, `SIGTSTP`）或作业控制信号。

Daemon 通常是用来执行特殊系统任务的。

#### **常见的 Daemon 示例**

* **`cron`**: 一个在规定时间执行预定命令的 daemon。
* **`sshd`**: Secure Shell (SSH) daemon，允许用户通过网络安全地远程登录到系统。
* **`httpd`**: HTTP 服务器 daemon (例如 Apache)，用于提供 Web 页面服务。
* **`inetd`**: Internet 超级服务器 daemon，它会监听多个网络端口，当有连接请求时，再启动相应的服务程序来处理连接。

> **安全注意**: 许多标准的 daemon 会作为特权进程（即有效用户 ID 为 0）运行，因此在编写 daemon 程序时应遵循严格的安全编程指南。
> **命名惯例**: 通常会将 daemon 程序的名称以字母 `d` 结尾（例如 `sshd`）。

#### **内核线程 (Kernel Threads)**

在 Linux 上，特定的 daemon 会作为**内核线程**运行。
* **定义**: 实现此类 daemon 的代码是内核的一部分，它们完全在内核空间中运行。
* **创建**: 它们通常在系统启动的时候被创建。
* **识别**: 当使用 `ps` 命令列出进程时，这些内核线程的名称会用方括号 `[]` 括起来。
* **示例**: `pdflush` 内核线程，它会定期将内存中被修改过的“脏”页面（缓冲区）写入磁盘，以同步数据。